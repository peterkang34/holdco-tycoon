import { EventType, SectorId } from '../engine/types';

export interface EventDefinition {
  type: EventType;
  title: string;
  description: string;
  probability: number; // 0-1
  effectDescription: string;
  tip?: string;
  tipSource?: string;
}

export const GLOBAL_EVENTS: EventDefinition[] = [
  {
    type: 'global_bull_market',
    title: 'Bull Market',
    description: 'Investor optimism is running high. Valuations are up across the board.',
    probability: 0.08,
    effectDescription: 'All opcos +5-10% revenue, +1-2 ppt margin; exit multiples +0.5x this round',
    tip: 'Bull markets are great for exits, but don\'t overpay for acquisitions when everyone is euphoric.',
    tipSource: 'Ch. VI',
  },
  {
    type: 'global_recession',
    title: 'Economic Recession',
    description: 'The economy contracts. Consumer and business spending drops.',
    probability: 0.06,
    effectDescription: 'Revenue and margins drop based on each sector\'s recession sensitivity',
    tip: 'Berkshire thrives in recessions because Buffett keeps powder dry. Cash is your competitive advantage when others are desperate.',
    tipSource: 'Ch. VI',
  },
  {
    type: 'global_interest_hike',
    title: 'Interest Rate Hike',
    description: 'The Fed raises rates to combat inflation.',
    probability: 0.07,
    effectDescription: 'Interest rate +1-2%',
    tip: 'TransDigm uses debt strategically but always ensures cash flows can cover interest even in a downturn.',
    tipSource: 'Ch. VII',
  },
  {
    type: 'global_interest_cut',
    title: 'Interest Rate Cut',
    description: 'The Fed cuts rates to stimulate growth.',
    probability: 0.06,
    effectDescription: 'Interest rate -1-2%',
    tip: 'Lower rates make debt cheaper, but don\'t let cheap financing tempt you into bad deals.',
  },
  {
    type: 'global_inflation',
    title: 'Inflation Spike',
    description: 'Supply chain disruptions drive costs higher across the economy.',
    probability: 0.05,
    effectDescription: 'Margin compression -2 ppt; revenue growth drag -3% for 2 rounds',
    tip: 'Pricing power is the best inflation hedge. Businesses that can pass costs through to customers will survive.',
    tipSource: 'Ch. III',
  },
  {
    type: 'global_credit_tightening',
    title: 'Credit Tightening',
    description: 'Banks pull back on lending. Credit becomes harder to access.',
    probability: 0.04,
    effectDescription: 'No debt-financed acquisitions for 2 rounds',
    tip: 'When credit tightens, cash-rich holdcos can find bargains. This is when discipline pays off.',
    tipSource: 'Ch. VI',
  },
  {
    type: 'global_quiet',
    title: 'Quiet Year',
    description: 'Markets are stable. Business as usual.',
    probability: 0.10,
    effectDescription: 'No special effects',
  },
];

export const PORTFOLIO_EVENTS: EventDefinition[] = [
  {
    type: 'portfolio_star_joins',
    title: 'Star Operator Joins',
    description: 'A talented executive joins one of your portfolio companies.',
    probability: 0.08,
    effectDescription: '+8% revenue, +2 ppt margin for one opco',
    tip: 'Constellation Software ties bonuses to ROIC. Great talent stays when incentives align.',
    tipSource: 'Ch. VIII',
  },
  {
    type: 'portfolio_talent_leaves',
    title: 'Key Talent Leaves',
    description: 'A critical team member departs from one of your businesses.',
    probability: 0.09,
    effectDescription: '-6% revenue, -2 ppt margin for one opco',
    tip: 'Thrasio\'s cultural failure led to mass exodus. Retention is cheaper than replacement.',
    tipSource: 'Ch. IX',
  },
  {
    type: 'portfolio_client_signs',
    title: 'Major Client Signs',
    description: 'One of your businesses lands a significant new contract.',
    probability: 0.08,
    effectDescription: '+8-12% revenue for one opco',
    tip: 'New clients are great, but watch concentration. No client should be irreplaceable.',
  },
  {
    type: 'portfolio_client_churns',
    title: 'Largest Client Churns',
    description: 'Your biggest customer at one of your businesses doesn\'t renew.',
    probability: 0.07,
    effectDescription: '-12-18% revenue, -1 ppt margin for one opco (weighted by concentration)',
    tip: 'Client concentration is a hidden risk. Diversified revenue sleeps better at night.',
    tipSource: 'Ch. VII',
  },
  {
    type: 'portfolio_breakthrough',
    title: 'Operational Breakthrough',
    description: 'One of your teams discovers a significant efficiency improvement.',
    probability: 0.05,
    effectDescription: '+3 ppt margin permanent (operational efficiency)',
    tip: 'Danaher\'s DBS turns these moments into repeatable systems. Document what works.',
    tipSource: 'Ch. III',
  },
  {
    type: 'portfolio_compliance',
    title: 'Compliance Issue',
    description: 'A regulatory problem surfaces at one of your businesses.',
    probability: 0.04,
    effectDescription: '-4 ppt margin, costs $500k (compliance overhead)',
    tip: 'Compliance costs are predictable. Violations are not. Invest in prevention.',
  },
  {
    type: 'portfolio_referral_deal',
    title: 'Seller Referral',
    description: 'A previous seller refers a high-quality business owner who is considering selling.',
    probability: 0.06,
    effectDescription: 'A quality-3+ deal is added to your pipeline at cold/warm heat',
    tip: 'Reputation compounds. Treating sellers well creates a referral flywheel.',
    tipSource: 'Acquiring Minds',
  },
  {
    type: 'portfolio_equity_demand',
    title: 'Key Employee Equity Demand',
    description: 'A top-performing operator at one of your businesses demands equity participation.',
    probability: 0.04,
    effectDescription: 'Grant equity (dilute 20-30 shares, +2% growth, +1ppt margin) or decline (60% chance talent leaves)',
    tip: 'Equity alignment can be powerful, but dilution adds up. Choose wisely.',
    tipSource: 'Acquiring Minds',
  },
  {
    type: 'portfolio_seller_note_renego',
    title: 'Seller Note Renegotiation',
    description: 'A seller offers to accept early payoff of their note at a 20-30% discount.',
    probability: 0.05,
    effectDescription: 'Pay 70-80% of remaining balance now or continue normal payments',
    tip: 'Discounted early payoffs can be great returns on capital â€” if you have the liquidity.',
  },
];

export interface SectorEventDefinition extends EventDefinition {
  sectorId: SectorId;
  ebitdaEffect: number | [number, number]; // single value or range
  growthEffect?: number;
  permanent?: boolean;
  affectsAll?: boolean; // true = all opcos in sector, false = one random opco
  costAmount?: number;
}

export const SECTOR_EVENTS: SectorEventDefinition[] = [
  // Agency events
  {
    type: 'sector_event',
    sectorId: 'agency',
    title: 'AI Tools Boost Margins',
    description: 'AI adoption accelerates delivery efficiency across your agencies.',
    probability: 0.04,
    effectDescription: '+8-15% revenue for all agencies (margin boost from efficiency)',
    ebitdaEffect: [0.08, 0.15],
    affectsAll: true,
    tip: 'Agencies that embrace AI will outcompete those that don\'t. Invest in tools.',
  },
  {
    type: 'sector_event',
    sectorId: 'agency',
    title: 'Platform Algorithm Change',
    description: 'A major platform algorithm change disrupts client results.',
    probability: 0.04,
    effectDescription: '-5-12% revenue for all agencies',
    ebitdaEffect: [-0.12, -0.05],
    affectsAll: true,
    tip: 'Platform dependency is risk. Diversify channels when possible.',
  },
  {
    type: 'sector_event',
    sectorId: 'agency',
    title: 'Creative Director Poached',
    description: 'A competitor recruits your agency\'s key creative leader.',
    probability: 0.03,
    effectDescription: '-10% revenue, -2% growth for one agency',
    ebitdaEffect: -0.10,
    growthEffect: -0.02,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'agency',
    title: 'Industry Award Won',
    description: 'Your agency wins a major industry award, boosting reputation.',
    probability: 0.03,
    effectDescription: '+5% revenue, +3% growth for one agency',
    ebitdaEffect: 0.05,
    growthEffect: 0.03,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'agency',
    title: 'Client Consolidates Roster',
    description: 'A major client consolidates their agency roster and cuts your shop.',
    probability: 0.04,
    effectDescription: '-15% revenue for one agency',
    ebitdaEffect: -0.15,
    affectsAll: false,
  },

  // SaaS events
  {
    type: 'sector_event',
    sectorId: 'saas',
    title: 'Vertical SaaS Cash Machine',
    description: 'Customer retention hits 95%+. This product is a compounding machine.',
    probability: 0.04,
    effectDescription: '+10% revenue for one SaaS (high retention drives expansion)',
    ebitdaEffect: 0.10,
    affectsAll: false,
    tip: 'Vertical SaaS with high retention is the Constellation playbook. These are keepers.',
    tipSource: 'Ch. III',
  },
  {
    type: 'sector_event',
    sectorId: 'saas',
    title: 'Open-Source Competitor Emerges',
    description: 'A free alternative threatens your SaaS product\'s market position.',
    probability: 0.03,
    effectDescription: '-8% revenue, -3% growth for one SaaS',
    ebitdaEffect: -0.08,
    growthEffect: -0.03,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'saas',
    title: 'Enterprise Contract Signed',
    description: 'A major enterprise signs a 3-year contract.',
    probability: 0.04,
    effectDescription: '+12% revenue for one SaaS',
    ebitdaEffect: 0.12,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'saas',
    title: 'API Integration Breaks',
    description: 'A key integration partner changes their API, breaking your product.',
    probability: 0.03,
    effectDescription: '-10% revenue, costs $500k to fix',
    ebitdaEffect: -0.10,
    costAmount: 500,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'saas',
    title: 'Net Revenue Retention Soars',
    description: 'Expansion revenue drives NRR above 120%.',
    probability: 0.04,
    effectDescription: '+6% organic growth rate for one SaaS',
    ebitdaEffect: 0,
    growthEffect: 0.06,
    affectsAll: false,
  },

  // Home Services events
  {
    type: 'sector_event',
    sectorId: 'homeServices',
    title: 'Heat Wave Drives Demand',
    description: 'Extreme weather creates record service call volume.',
    probability: 0.04,
    effectDescription: '+10% revenue for home services',
    ebitdaEffect: 0.10,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'homeServices',
    title: 'New Housing Development',
    description: 'A major housing development opens in your service territory.',
    probability: 0.03,
    effectDescription: '+8% revenue, +2% growth',
    ebitdaEffect: 0.08,
    growthEffect: 0.02,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'homeServices',
    title: 'Technician Shortage',
    description: 'Labor market tightness drives up technician wages.',
    probability: 0.04,
    effectDescription: '-6% revenue for all home services (wage pressure on margins)',
    ebitdaEffect: -0.06,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'homeServices',
    title: 'Preferred Vendor Status',
    description: 'You win preferred vendor status with a property management group.',
    probability: 0.03,
    effectDescription: '+12% revenue for one business',
    ebitdaEffect: 0.12,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'homeServices',
    title: 'Seasonal Slowdown',
    description: 'Seasonal demand hits harder than expected this year.',
    probability: 0.04,
    effectDescription: '-5% revenue this year only',
    ebitdaEffect: -0.05,
    affectsAll: true,
  },

  // Consumer events
  {
    type: 'sector_event',
    sectorId: 'consumer',
    title: 'Brand Goes Viral',
    description: 'Social media sends your brand trending. Orders surge.',
    probability: 0.03,
    effectDescription: '+15% revenue for one brand (temporary)',
    ebitdaEffect: 0.15,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'consumer',
    title: 'Retailer Drops Product',
    description: 'A major retailer removes your product from their shelves.',
    probability: 0.03,
    effectDescription: '-12% revenue for one brand',
    ebitdaEffect: -0.12,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'consumer',
    title: 'Raw Materials Spike',
    description: 'Supply chain issues drive raw material costs up sharply.',
    probability: 0.04,
    effectDescription: '-8% margin compression for all consumer brands (cost spike)',
    ebitdaEffect: -0.08,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'consumer',
    title: 'National Distribution Secured',
    description: 'Your brand secures national distribution at a major retailer.',
    probability: 0.03,
    effectDescription: '+10% revenue, +4% growth for one brand',
    ebitdaEffect: 0.10,
    growthEffect: 0.04,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'consumer',
    title: 'Category Trending',
    description: 'Consumer sentiment shifts favorably for your product category.',
    probability: 0.04,
    effectDescription: '+6% revenue for all consumer brands',
    ebitdaEffect: 0.06,
    affectsAll: true,
  },

  // Industrial events
  {
    type: 'sector_event',
    sectorId: 'industrial',
    title: 'Defense Contract Awarded',
    description: 'A government defense contract drives surge in aerospace orders.',
    probability: 0.04,
    effectDescription: '+12% revenue',
    ebitdaEffect: 0.12,
    affectsAll: false,
    tip: 'HEICO and TransDigm thrive on defense and aerospace aftermarket.',
    tipSource: 'Ch. III',
  },
  {
    type: 'sector_event',
    sectorId: 'industrial',
    title: 'Supply Chain Normalization',
    description: 'Supply chain improvements reduce lead times and costs.',
    probability: 0.04,
    effectDescription: '+5% revenue for all industrials (lower costs)',
    ebitdaEffect: 0.05,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'industrial',
    title: 'Customer Delays CapEx',
    description: 'A major customer delays their capital expenditure cycle.',
    probability: 0.03,
    effectDescription: '-8% revenue for one industrial',
    ebitdaEffect: -0.08,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'industrial',
    title: 'Lean Manufacturing Success',
    description: 'DBS-style operational improvements expand margins permanently.',
    probability: 0.03,
    effectDescription: '+3 ppt margin permanent (lean efficiency)',
    ebitdaEffect: 0.06,
    permanent: true,
    affectsAll: false,
    tip: 'The Danaher Business System turns operational excellence into compounding returns.',
    tipSource: 'Ch. III',
  },
  {
    type: 'sector_event',
    sectorId: 'industrial',
    title: 'Tariffs Increase Costs',
    description: 'New tariffs increase raw material import costs.',
    probability: 0.04,
    effectDescription: '-7% margin compression for all industrials (tariff costs)',
    ebitdaEffect: -0.07,
    affectsAll: true,
  },

  // B2B Services events
  {
    type: 'sector_event',
    sectorId: 'b2bServices',
    title: 'Multi-Year Contract Signed',
    description: 'A major client commits to a multi-year managed services agreement.',
    probability: 0.04,
    effectDescription: '+10% revenue for one B2B services co',
    ebitdaEffect: 0.10,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'b2bServices',
    title: 'Client In-Sources',
    description: 'A key client decides to bring your function in-house.',
    probability: 0.03,
    effectDescription: '-12% revenue for one business',
    ebitdaEffect: -0.12,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'b2bServices',
    title: 'Cybersecurity Demand Surge',
    description: 'A high-profile breach at a client drives demand for your MSP services.',
    probability: 0.03,
    effectDescription: '+8% revenue for IT services',
    ebitdaEffect: 0.08,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'b2bServices',
    title: 'Utilization Rate Soars',
    description: 'Consultant utilization hits 85%+, maximizing revenue per head.',
    probability: 0.04,
    effectDescription: '+6% revenue (high utilization)',
    ebitdaEffect: 0.06,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'b2bServices',
    title: 'Enterprise Procurement Freeze',
    description: 'Economic uncertainty causes enterprise clients to freeze vendor spend.',
    probability: 0.04,
    effectDescription: '-8% revenue for all B2B services',
    ebitdaEffect: -0.08,
    affectsAll: true,
  },

  // Healthcare events
  {
    type: 'sector_event',
    sectorId: 'healthcare',
    title: 'Medicare Rate Increase',
    description: 'CMS increases Medicare reimbursement rates by 3%.',
    probability: 0.04,
    effectDescription: '+6% revenue for all healthcare (rate increase)',
    ebitdaEffect: 0.06,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'healthcare',
    title: 'New Compliance Regulation',
    description: 'New healthcare regulations increase compliance costs.',
    probability: 0.04,
    effectDescription: '-8% margin compression for all healthcare (compliance costs)',
    ebitdaEffect: -0.08,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'healthcare',
    title: 'Physician Partner Retires',
    description: 'A key physician partner announces retirement.',
    probability: 0.03,
    effectDescription: '-10% revenue for one practice',
    ebitdaEffect: -0.10,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'healthcare',
    title: 'Value-Based Care Success',
    description: 'Your value-based care contract outperforms fee-for-service.',
    probability: 0.03,
    effectDescription: '+10% revenue for one practice',
    ebitdaEffect: 0.10,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'healthcare',
    title: 'Aging Demographics Boost',
    description: 'Demographic trends drive increased patient volume.',
    probability: 0.04,
    effectDescription: '+5% revenue for all healthcare',
    ebitdaEffect: 0.05,
    affectsAll: true,
  },

  // Restaurant events
  {
    type: 'sector_event',
    sectorId: 'restaurant',
    title: 'Delivery Partnership Success',
    description: 'A food delivery partnership drives 20% more orders.',
    probability: 0.04,
    effectDescription: '+10% revenue for one restaurant',
    ebitdaEffect: 0.10,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'restaurant',
    title: 'Food Cost Inflation',
    description: 'Food costs spike due to supply chain pressures.',
    probability: 0.04,
    effectDescription: '-8% margin compression for all restaurants (food costs)',
    ebitdaEffect: -0.08,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'restaurant',
    title: 'New Unit Exceeds Projections',
    description: 'A new restaurant location outperforms expectations.',
    probability: 0.03,
    effectDescription: '+12% revenue for one restaurant',
    ebitdaEffect: 0.12,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'restaurant',
    title: 'Health Inspection Issue',
    description: 'A health code violation forces temporary closure.',
    probability: 0.03,
    effectDescription: '-15% revenue for one restaurant (temporary)',
    ebitdaEffect: -0.15,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'restaurant',
    title: 'Loyalty Program Success',
    description: 'Your loyalty program drives repeat visits up 15%.',
    probability: 0.04,
    effectDescription: '+6% revenue, +2% growth for one restaurant',
    ebitdaEffect: 0.06,
    growthEffect: 0.02,
    affectsAll: false,
  },

  // Real Estate events
  {
    type: 'sector_event',
    sectorId: 'realEstate',
    title: 'Interest Rate Drop',
    description: 'Lower rates increase property valuations.',
    probability: 0.04,
    effectDescription: '+8% revenue for real estate (higher valuations)',
    ebitdaEffect: 0.08,
    affectsAll: true,
    tip: 'Brookfield matches long-dated assets with long-dated debt. Duration matching is key.',
    tipSource: 'Ch. III',
  },
  {
    type: 'sector_event',
    sectorId: 'realEstate',
    title: 'Occupancy Hits 97%',
    description: 'Near-full occupancy gives you pricing power.',
    probability: 0.04,
    effectDescription: '+6% revenue for one property (pricing power)',
    ebitdaEffect: 0.06,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'realEstate',
    title: 'Major Tenant Vacates',
    description: 'A significant tenant doesn\'t renew their lease.',
    probability: 0.03,
    effectDescription: '-15% revenue for one property',
    ebitdaEffect: -0.15,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'realEstate',
    title: 'Infrastructure Concession',
    description: 'You\'re awarded a new 25-year infrastructure concession.',
    probability: 0.03,
    effectDescription: '+10% revenue',
    ebitdaEffect: 0.10,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'realEstate',
    title: 'Property Tax Reassessment',
    description: 'Tax reassessments increase property tax burden.',
    probability: 0.04,
    effectDescription: '-5% margin compression for all real estate (tax burden)',
    ebitdaEffect: -0.05,
    affectsAll: true,
  },

  // Education events
  {
    type: 'sector_event',
    sectorId: 'education',
    title: 'Counter-Cyclical Enrollment Surge',
    description: 'Economic downturn drives enrollment surge as workers reskill.',
    probability: 0.04,
    effectDescription: '+10% revenue (enrollment surge)',
    ebitdaEffect: 0.10,
    affectsAll: true,
    tip: 'Education is counter-cyclical. When the economy struggles, people invest in themselves.',
  },
  {
    type: 'sector_event',
    sectorId: 'education',
    title: 'Accreditation Threat',
    description: 'A regulatory review threatens your accreditation status.',
    probability: 0.03,
    effectDescription: '-12% revenue for one education co',
    ebitdaEffect: -0.12,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'education',
    title: 'Corporate Training Partnership',
    description: 'A major employer partners with you for workforce training.',
    probability: 0.04,
    effectDescription: '+8% revenue for one business',
    ebitdaEffect: 0.08,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'education',
    title: 'Completion Rates Improve',
    description: 'Better completion rates boost reputation and referrals.',
    probability: 0.03,
    effectDescription: '+5% growth rate',
    ebitdaEffect: 0,
    growthEffect: 0.05,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'education',
    title: 'Free Alternatives Emerge',
    description: 'Free online courses erode your pricing power.',
    probability: 0.04,
    effectDescription: '-6% revenue for one education co',
    ebitdaEffect: -0.06,
    affectsAll: false,
  },

  // Insurance events
  {
    type: 'sector_event',
    sectorId: 'insurance',
    title: 'Hard Market Cycle',
    description: 'Insurance carriers raise rates across the board. Commissions surge.',
    probability: 0.04,
    effectDescription: '+8% revenue for all insurance',
    ebitdaEffect: 0.08,
    affectsAll: true,
    tip: 'Hard markets are the insurance industry\'s bull run. Lock in renewals.',
  },
  {
    type: 'sector_event',
    sectorId: 'insurance',
    title: 'Soft Market Pressure',
    description: 'Carriers compete on price, compressing commissions.',
    probability: 0.04,
    effectDescription: '-6% revenue for all insurance',
    ebitdaEffect: -0.06,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'insurance',
    title: 'Star Producer Recruited',
    description: 'You recruit a star insurance producer who brings a large book of business.',
    probability: 0.03,
    effectDescription: '+12% revenue for one agency',
    ebitdaEffect: 0.12,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'insurance',
    title: 'Carrier Bonus Achieved',
    description: 'Your agency hits carrier bonus thresholds, earning contingent commissions.',
    probability: 0.03,
    effectDescription: '+10% revenue for one agency',
    ebitdaEffect: 0.10,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'insurance',
    title: 'Regulatory Compliance Shift',
    description: 'New insurance regulations require costly compliance updates.',
    probability: 0.04,
    effectDescription: '-5% revenue for all insurance, costs $300k',
    ebitdaEffect: -0.05,
    costAmount: 300,
    affectsAll: true,
  },

  // Auto Services events
  {
    type: 'sector_event',
    sectorId: 'autoServices',
    title: 'Vehicle Fleet Aging',
    description: 'Average vehicle age hits record highs, driving repair demand.',
    probability: 0.04,
    effectDescription: '+8% revenue for all auto services',
    ebitdaEffect: 0.08,
    affectsAll: true,
    tip: 'An aging vehicle fleet is a multi-year tailwind for auto services.',
  },
  {
    type: 'sector_event',
    sectorId: 'autoServices',
    title: 'Parts Cost Spike',
    description: 'OEM parts prices surge due to supply chain disruptions.',
    probability: 0.04,
    effectDescription: '-7% margin compression for all auto services',
    ebitdaEffect: -0.07,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'autoServices',
    title: 'Fleet Contract Won',
    description: 'You win a municipal or commercial fleet maintenance contract.',
    probability: 0.03,
    effectDescription: '+12% revenue for one auto service',
    ebitdaEffect: 0.12,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'autoServices',
    title: 'EV Transition Challenge',
    description: 'Electric vehicle adoption reduces traditional service demand.',
    probability: 0.03,
    effectDescription: '-8% revenue for one auto service',
    ebitdaEffect: -0.08,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'autoServices',
    title: 'Insurance DRP Partnership',
    description: 'You become a Direct Repair Program partner for a major insurer.',
    probability: 0.03,
    effectDescription: '+10% revenue for one auto service',
    ebitdaEffect: 0.10,
    affectsAll: false,
  },

  // Distribution & Logistics events
  {
    type: 'sector_event',
    sectorId: 'distribution',
    title: 'Supply Chain Normalization',
    description: 'Post-disruption normalization reduces costs and improves margins.',
    probability: 0.04,
    effectDescription: '+6% revenue for all distribution',
    ebitdaEffect: 0.06,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'distribution',
    title: 'Freight Cost Surge',
    description: 'Freight rates spike, squeezing distribution margins.',
    probability: 0.04,
    effectDescription: '-8% margin compression for all distribution',
    ebitdaEffect: -0.08,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'distribution',
    title: 'Exclusive Territory Agreement',
    description: 'You secure exclusive distribution rights in a key territory.',
    probability: 0.03,
    effectDescription: '+12% revenue for one distributor',
    ebitdaEffect: 0.12,
    affectsAll: false,
    tip: 'Exclusive territories are moats. Protect them fiercely.',
  },
  {
    type: 'sector_event',
    sectorId: 'distribution',
    title: 'Customer Consolidation',
    description: 'A major customer gets acquired and consolidates suppliers.',
    probability: 0.03,
    effectDescription: '-10% revenue for one distributor',
    ebitdaEffect: -0.10,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'distribution',
    title: 'E-Commerce Channel Opens',
    description: 'An online marketplace opens a new channel for your products.',
    probability: 0.03,
    effectDescription: '+8% revenue for one distributor',
    ebitdaEffect: 0.08,
    affectsAll: false,
  },

  // New events for existing sectors
  {
    type: 'sector_event',
    sectorId: 'saas',
    title: 'AI Disruption Threat',
    description: 'An AI-native competitor threatens to commoditize your product category.',
    probability: 0.03,
    effectDescription: '-8% revenue, -4% growth for one SaaS',
    ebitdaEffect: -0.08,
    growthEffect: -0.04,
    affectsAll: false,
    tip: 'AI disruption is real. Embed AI into your product before competitors do.',
  },
  {
    type: 'sector_event',
    sectorId: 'industrial',
    title: 'Reshoring Tailwind',
    description: 'Domestic manufacturing gets a boost from reshoring trends.',
    probability: 0.04,
    effectDescription: '+10% revenue, +3% growth for all industrials',
    ebitdaEffect: 0.10,
    growthEffect: 0.03,
    affectsAll: true,
    tip: 'Reshoring is a multi-decade trend. Domestic manufacturers with capacity win.',
  },
  {
    type: 'sector_event',
    sectorId: 'healthcare',
    title: 'Clinical Staffing Crisis',
    description: 'Nurse and clinician shortages drive up labor costs across your practices.',
    probability: 0.04,
    effectDescription: '-8% margin compression for all healthcare',
    ebitdaEffect: -0.08,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'restaurant',
    title: 'Ghost Kitchen Expansion',
    description: 'Your ghost kitchen concept gets picked up by a delivery platform.',
    probability: 0.03,
    effectDescription: '+8% revenue, +2% growth for one restaurant',
    ebitdaEffect: 0.08,
    growthEffect: 0.02,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'education',
    title: 'AI Tutoring Breakthrough',
    description: 'Your AI tutoring product achieves dramatically better outcomes.',
    probability: 0.03,
    effectDescription: '+10% revenue, +5% growth for one education co',
    ebitdaEffect: 0.10,
    growthEffect: 0.05,
    affectsAll: false,
    tip: 'AI + education is a powerful combination. Scale personalized learning.',
  },
  {
    type: 'sector_event',
    sectorId: 'consumer',
    title: 'Product Recall Crisis',
    description: 'A product quality issue forces a costly recall.',
    probability: 0.03,
    effectDescription: '-12% revenue, -2% growth for one brand',
    ebitdaEffect: -0.12,
    growthEffect: -0.02,
    affectsAll: false,
  },

  // Wealth Management events
  {
    type: 'sector_event',
    sectorId: 'wealthManagement',
    title: 'Bull Market AUM Surge',
    description: 'Rising equity markets drive assets under management to new highs.',
    probability: 0.04,
    effectDescription: '+8-12% revenue for all wealth management (AUM growth)',
    ebitdaEffect: [0.08, 0.12],
    affectsAll: true,
    tip: 'AUM-linked fees mean your revenue rises and falls with the market. Diversify fee structures when possible.',
  },
  {
    type: 'sector_event',
    sectorId: 'wealthManagement',
    title: 'Market Correction Hits AUM',
    description: 'A sharp market selloff reduces assets under management across your advisory firms.',
    probability: 0.04,
    effectDescription: '-8-12% revenue for all wealth management (AUM decline)',
    ebitdaEffect: [-0.12, -0.08],
    affectsAll: true,
    tip: 'Fee-based advisory is inherently tied to market performance. Fixed financial planning fees provide ballast.',
  },
  {
    type: 'sector_event',
    sectorId: 'wealthManagement',
    title: 'Star Advisor Departs',
    description: 'A top-producing advisor leaves and takes their client book to a competitor.',
    probability: 0.03,
    effectDescription: '-15% revenue for one firm',
    ebitdaEffect: -0.15,
    affectsAll: false,
    tip: 'Non-competes help, but the best retention is culture, equity, and competitive payouts.',
  },
  {
    type: 'sector_event',
    sectorId: 'wealthManagement',
    title: 'Fee Compression Pressure',
    description: 'Robo-advisors and index fund growth put downward pressure on advisory fees.',
    probability: 0.04,
    effectDescription: '-5% revenue for all wealth management (fee pressure)',
    ebitdaEffect: -0.05,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'wealthManagement',
    title: 'Large Client Relationship Won',
    description: 'Your firm wins a $50M+ client relationship through a referral.',
    probability: 0.03,
    effectDescription: '+10% revenue for one firm',
    ebitdaEffect: 0.10,
    affectsAll: false,
    tip: 'Referrals from existing clients are the lifeblood of wealth management growth.',
  },
  {
    type: 'sector_event',
    sectorId: 'wealthManagement',
    title: 'Regulatory Fiduciary Scrutiny',
    description: 'New fiduciary regulations increase compliance requirements and costs.',
    probability: 0.04,
    effectDescription: '-5% revenue for all wealth management, costs $300K',
    ebitdaEffect: -0.05,
    costAmount: 300,
    affectsAll: true,
  },

  // Environmental events
  {
    type: 'sector_event',
    sectorId: 'environmental',
    title: 'Municipal Contract Won',
    description: 'You win a multi-year municipal hauling contract through competitive bid.',
    probability: 0.03,
    effectDescription: '+12% revenue for one business',
    ebitdaEffect: 0.12,
    affectsAll: false,
    tip: 'Municipal contracts provide predictable, long-term revenue. Win them and protect them.',
  },
  {
    type: 'sector_event',
    sectorId: 'environmental',
    title: 'Recycling Commodity Price Drop',
    description: 'Global recyclable material prices crash, crushing recycling margins.',
    probability: 0.04,
    effectDescription: '-8% revenue for all environmental (commodity collapse)',
    ebitdaEffect: -0.08,
    affectsAll: true,
    tip: 'Pure recycling operations are commodity-exposed. Diversify into collection where margins are steadier.',
  },
  {
    type: 'sector_event',
    sectorId: 'environmental',
    title: 'Route Density Optimization',
    description: 'Software-driven route optimization permanently improves collection efficiency.',
    probability: 0.03,
    effectDescription: '+3 ppt margin permanent (route optimization)',
    ebitdaEffect: 0.06,
    permanent: true,
    affectsAll: false,
    tip: 'Route density is the key metric in waste. More customers per route = higher margins per stop.',
  },
  {
    type: 'sector_event',
    sectorId: 'environmental',
    title: 'Environmental Regulation Tightens',
    description: 'New EPA regulations increase disposal and compliance costs.',
    probability: 0.04,
    effectDescription: '-6% margin compression for all environmental (regulatory costs)',
    ebitdaEffect: -0.06,
    affectsAll: true,
  },
  {
    type: 'sector_event',
    sectorId: 'environmental',
    title: 'Landfill Capacity Squeeze',
    description: 'Regional landfill capacity tightens, increasing tipping fees and disposal revenue.',
    probability: 0.03,
    effectDescription: '+8% revenue for one business',
    ebitdaEffect: 0.08,
    affectsAll: false,
  },
  {
    type: 'sector_event',
    sectorId: 'environmental',
    title: 'New Waste Stream Secured',
    description: 'A large commercial account signs a multi-year waste management contract.',
    probability: 0.03,
    effectDescription: '+10% revenue for one business',
    ebitdaEffect: 0.10,
    affectsAll: false,
  },

  // Home Services - new event
  {
    type: 'sector_event',
    sectorId: 'homeServices',
    title: 'Maintenance Agreement Conversion',
    description: 'Your team successfully converts break-fix customers to recurring service agreements.',
    probability: 0.03,
    effectDescription: '+7% revenue, +2% growth for one business (recurring revenue)',
    ebitdaEffect: 0.07,
    growthEffect: 0.02,
    affectsAll: false,
    tip: 'Converting one-time service calls to maintenance agreements is the PE playbook for home services. Recurring revenue commands premium multiples.',
  },

  // Restaurant - new event
  {
    type: 'sector_event',
    sectorId: 'restaurant',
    title: 'Minimum Wage Increase',
    description: 'State and local minimum wage hikes squeeze restaurant labor margins.',
    probability: 0.04,
    effectDescription: '-7% margin compression for all restaurants (labor cost increase)',
    ebitdaEffect: -0.07,
    affectsAll: true,
    tip: 'Minimum wage increases are inevitable. Invest in automation and menu engineering to protect margins.',
  },
];

export function getEventsForSector(sectorId: SectorId): SectorEventDefinition[] {
  return SECTOR_EVENTS.filter(event => event.sectorId === sectorId);
}
